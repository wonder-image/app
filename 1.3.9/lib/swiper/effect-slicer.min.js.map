{"version":3,"file":"effect-slicer.min.js","names":["window","SwiperElementRegisterParams","swiper","extendParams","on","emit","slicerEffect","split","createImages","slides","forEach","slideEl","querySelector","imageEl","nextEl","nextElementSibling","cloneContainerEl","document","createElement","classList","add","i","params","div","appendChild","cloneNode","parentNode","insertBefore","setImages","querySelectorAll","style","width","height","cloneEl","cloneElIndex","cloneImg","direction","top","left","setTransition","duration","images","contentEl","transitionDuration","imageIndex","transitionTimingFunction","speed","length","activeIndex","eventTriggered","transitionEndTarget","onTransitionEnd","e","target","removeEventListener","destroyed","animating","evt","CustomEvent","bubbles","cancelable","wrapperEl","dispatchEvent","addEventListener","effectVirtualTransitionEnd","effect","axis","slideIndex","transform","slideProgress","progress","size","setTranslate","_s","classNames","push","overwriteParams","slidesPerView","slidesPerGroup","watchSlidesProgress","spaceBetween","virtualTranslate","Object","assign","originalParams","translate"],"sources":["../demo-vite/effect-slicer.esm.js"],"sourcesContent":["if (typeof window !== 'undefined' && window.SwiperElementRegisterParams) {\n  window.SwiperElementRegisterParams(['slicerEffect']);\n}\n\nexport default function EffectSlicer({ swiper, extendParams, on, emit }) {\n  extendParams({\n    slicerEffect: {\n      split: 5,\n    },\n  });\n\n  function effectVirtualTransitionEnd({ duration }) {\n    const { slides, activeIndex } = swiper;\n    if (duration !== 0) {\n      let eventTriggered = false;\n      const transitionEndTarget = slides[activeIndex].querySelector(\n        '.swiper-slicer-image-clone:nth-child(1)',\n      );\n      if (!transitionEndTarget) return;\n      const onTransitionEnd = (e) => {\n        if (e.target !== transitionEndTarget) return;\n        transitionEndTarget.removeEventListener(\n          'transitionend',\n          onTransitionEnd,\n        );\n        if (eventTriggered) return;\n        if (!swiper || swiper.destroyed) return;\n        eventTriggered = true;\n        swiper.animating = false;\n\n        const evt = new window.CustomEvent('transitionend', {\n          bubbles: true,\n          cancelable: true,\n        });\n        swiper.wrapperEl.dispatchEvent(evt);\n      };\n      transitionEndTarget.addEventListener('transitionend', onTransitionEnd);\n    }\n  }\n\n  const createImages = () => {\n    swiper.slides.forEach((slideEl) => {\n      if (slideEl.querySelector('.swiper-slicer-image-clones')) return;\n      const imageEl = slideEl.querySelector('.swiper-slicer-image');\n      if (!imageEl) return;\n      const nextEl = imageEl.nextElementSibling;\n      const cloneContainerEl = document.createElement('div');\n      cloneContainerEl.classList.add('swiper-slicer-image-clones');\n      for (let i = 0; i < swiper.params.slicerEffect.split; i += 1) {\n        const div = document.createElement('div');\n        div.classList.add('swiper-slicer-image-clone');\n        div.appendChild(imageEl.cloneNode());\n        cloneContainerEl.appendChild(div);\n      }\n      if (nextEl) {\n        imageEl.parentNode.insertBefore(cloneContainerEl, nextEl);\n      } else {\n        imageEl.parentNode.appendChild(cloneContainerEl);\n      }\n    });\n  };\n\n  const setImages = () => {\n    swiper.slides.forEach((slideEl) =>\n      slideEl.querySelectorAll('.swiper-slicer-image').forEach((imageEl) => {\n        imageEl.style.width = `${swiper.width}px`;\n        imageEl.style.height = `${swiper.height}px`;\n      }),\n    );\n    swiper.slides.forEach((slideEl) => {\n      slideEl\n        .querySelectorAll('.swiper-slicer-image-clone')\n        .forEach((cloneEl, cloneElIndex) => {\n          const cloneImg = cloneEl.querySelector('.swiper-slicer-image');\n          if (swiper.params.direction === 'horizontal') {\n            cloneEl.style.height = `${100 / swiper.params.slicerEffect.split}%`;\n            cloneEl.style.top = `${\n              (100 / swiper.params.slicerEffect.split) * cloneElIndex\n            }%`;\n            cloneImg.style.top = `-${100 * cloneElIndex}%`;\n          } else {\n            cloneEl.style.width = `${100 / swiper.params.slicerEffect.split}%`;\n            cloneEl.style.left = `${\n              (100 / swiper.params.slicerEffect.split) * cloneElIndex\n            }%`;\n            cloneImg.style.left = `-${100 * cloneElIndex}%`;\n          }\n        });\n    });\n  };\n\n  const setTranslate = () => {\n    const axis = swiper.params.direction === 'vertical' ? 'Y' : 'X';\n    swiper.slides.forEach((slideEl, slideIndex) => {\n      slideEl.style.transform = `translate${axis}(-${slideIndex * 100}%)`;\n      const slideProgress = slideEl.progress;\n      const contentEl = slideEl.querySelector('.swiper-slide-content');\n      if (contentEl) {\n        contentEl.style.transform = `translate${axis}(${\n          swiper.size * -slideProgress * 1.2\n        }px)`;\n      }\n      const images = slideEl.querySelectorAll('.swiper-slicer-image-clone');\n      images.forEach((imageEl) => {\n        const progress = -slideProgress;\n        imageEl.style.transform = `translate${axis}(${progress * 100}%)`;\n      });\n    });\n  };\n\n  const setTransition = (duration) => {\n    swiper.slides.forEach((slideEl) => {\n      const images = slideEl.querySelectorAll('.swiper-slicer-image-clone');\n      const contentEl = slideEl.querySelector('.swiper-slide-content');\n      if (contentEl) {\n        contentEl.style.transitionDuration = `${duration}ms`;\n      }\n      // eslint-disable-next-line\n\n      images.forEach((imageEl, imageIndex) => {\n        if (duration === 0) {\n          imageEl.style.transitionTimingFunction = 'ease-out';\n          imageEl.style.transitionDuration = `${\n            swiper.params.speed +\n            (swiper.params.speed / (images.length - 1)) *\n              (images.length - imageIndex - 1)\n          }ms`;\n        } else {\n          imageEl.style.transitionTimingFunction = '';\n          imageEl.style.transitionDuration = `${\n            duration +\n            (duration / (images.length - 1)) * (images.length - imageIndex - 1)\n          }ms`;\n        }\n      });\n    });\n\n    effectVirtualTransitionEnd({ duration });\n  };\n\n  on('setTranslate', () => {\n    if (swiper.params.effect !== 'slicer') return;\n\n    setTranslate();\n  });\n\n  on('setTransition', (_s, duration) => {\n    if (swiper.params.effect !== 'slicer') return;\n    setTransition(duration);\n  });\n\n  on('slidesLengthChange', () => {\n    createImages();\n    setImages();\n  });\n\n  on('beforeInit', () => {\n    if (swiper.params.effect !== 'slicer') return;\n\n    swiper.classNames.push('swiper-slicer');\n\n    const overwriteParams = {\n      slidesPerView: 1,\n      slidesPerGroup: 1,\n      watchSlidesProgress: true,\n      spaceBetween: 0,\n      virtualTranslate: true,\n    };\n\n    Object.assign(swiper.params, overwriteParams);\n    Object.assign(swiper.originalParams, overwriteParams);\n  });\n  on('init', () => {\n    if (swiper.params.effect !== 'slicer') return;\n    createImages();\n    emit('setTranslate', swiper, swiper.translate);\n  });\n\n  on('resize init', () => {\n    if (swiper.params.effect !== 'slicer') return;\n    setImages();\n  });\n}\n"],"mappings":"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"}